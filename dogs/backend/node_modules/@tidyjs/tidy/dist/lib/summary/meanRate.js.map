{"version":3,"file":"meanRate.js","sources":["../../../src/summary/meanRate.ts"],"sourcesContent":["import { fsum } from 'd3-array';\nimport { rate } from '../math/math';\n\n/**\n * Returns a function that computes the mean of a rate over an array of items\n * @param numerator A string key of the object or an accessor converting the object to a number\n * @param denominator A string key of the object or an accessor converting the object to a number\n */\nexport function meanRate<T extends object>(\n  numerator: keyof T | ((d: T) => number),\n  denominator: keyof T | ((d: T) => number)\n) {\n  const numeratorFn =\n    typeof numerator === 'function'\n      ? numerator\n      : (d: T) => (d[numerator] as unknown) as number;\n  const denominatorFn =\n    typeof denominator === 'function'\n      ? denominator\n      : (d: T) => (d[denominator] as unknown) as number;\n\n  return (items: T[]) => {\n    const numerator = fsum(items, numeratorFn);\n    const denominator = fsum(items, denominatorFn);\n    return rate(numerator, denominator);\n  };\n}\n"],"names":["fsum","rate"],"mappings":";;;;;;;kBASE,WACA;AAEA,QAAM,cACJ,OAAO,cAAc,aACjB,YACA,CAAC,MAAU,EAAE;AACnB,QAAM,gBACJ,OAAO,gBAAgB,aACnB,cACA,CAAC,MAAU,EAAE;AAEnB,SAAO,CAAC;AACN,UAAM,aAAYA,aAAK,OAAO;AAC9B,UAAM,eAAcA,aAAK,OAAO;AAChC,WAAOC,UAAK,YAAW;AAAA;AAAA;;;;"}